{
  "$schema": "../../../../harness/test-case.schema.json",
  "suite": "ledger-syntax-valid",
  "description": "Valid Ledger syntax that should parse successfully",
  "tests": [
    {
      "id": "empty-file",
      "description": "Empty file is valid",
      "input": {"inline": ""},
      "expected": {"parse": "success"},
      "tags": ["minimal"]
    },
    {
      "id": "comment-semicolon",
      "description": "Semicolon comment",
      "input": {"inline": "; This is a comment"},
      "expected": {"parse": "success"},
      "tags": ["comments"]
    },
    {
      "id": "comment-hash",
      "description": "Hash comment",
      "input": {"inline": "# This is also a comment"},
      "expected": {"parse": "success"},
      "tags": ["comments"]
    },
    {
      "id": "comment-asterisk",
      "description": "Asterisk comment (indented)",
      "input": {"inline": "  * This is a comment too"},
      "expected": {"parse": "success"},
      "tags": ["comments"]
    },
    {
      "id": "transaction-minimal",
      "description": "Minimal transaction with two postings",
      "input": {"inline": "2024/01/15 Grocery Store\n    Expenses:Food  $50.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["transaction", "minimal"]
    },
    {
      "id": "transaction-iso-date",
      "description": "Transaction with ISO date format",
      "input": {"inline": "2024-01-15 Grocery Store\n    Expenses:Food  $50.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["transaction", "date"]
    },
    {
      "id": "transaction-cleared",
      "description": "Cleared transaction with *",
      "input": {"inline": "2024/01/15 * Grocery Store\n    Expenses:Food  $50.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["transaction", "state"]
    },
    {
      "id": "transaction-pending",
      "description": "Pending transaction with !",
      "input": {"inline": "2024/01/15 ! Grocery Store\n    Expenses:Food  $50.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["transaction", "state"]
    },
    {
      "id": "transaction-code",
      "description": "Transaction with check number/code",
      "input": {"inline": "2024/01/15 * (1234) Grocery Store\n    Expenses:Food  $50.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["transaction", "code"]
    },
    {
      "id": "transaction-payee-note",
      "description": "Transaction with payee and note (pipe separator)",
      "input": {"inline": "2024/01/15 * Grocery Store | Weekly shopping\n    Expenses:Food  $50.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["transaction", "note"]
    },
    {
      "id": "amount-commodity-prefix",
      "description": "Amount with commodity prefix ($)",
      "input": {"inline": "2024/01/15 Test\n    Assets:A  $100.00\n    Assets:B"},
      "expected": {"parse": "success"},
      "tags": ["amount", "commodity"]
    },
    {
      "id": "amount-commodity-suffix",
      "description": "Amount with commodity suffix (EUR)",
      "input": {"inline": "2024/01/15 Test\n    Assets:A  100.00 EUR\n    Assets:B"},
      "expected": {"parse": "success"},
      "tags": ["amount", "commodity"]
    },
    {
      "id": "amount-quoted-commodity",
      "description": "Amount with quoted commodity",
      "input": {"inline": "2024/01/15 Test\n    Assets:A  100 \"MUTUAL FUND\"\n    Assets:B"},
      "expected": {"parse": "success"},
      "tags": ["amount", "commodity"]
    },
    {
      "id": "amount-negative",
      "description": "Negative amount",
      "input": {"inline": "2024/01/15 Test\n    Assets:A  -$100.00\n    Assets:B  $100.00"},
      "expected": {"parse": "success"},
      "tags": ["amount"]
    },
    {
      "id": "amount-thousands-separator",
      "description": "Amount with thousands separator",
      "input": {"inline": "2024/01/15 Test\n    Assets:A  $1,000,000.00\n    Assets:B"},
      "expected": {"parse": "success"},
      "tags": ["amount", "format"]
    },
    {
      "id": "posting-note",
      "description": "Posting with inline note",
      "input": {"inline": "2024/01/15 Test\n    Expenses:Food  $50.00  ; grocery run\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["posting", "note"]
    },
    {
      "id": "posting-virtual",
      "description": "Virtual posting with parentheses",
      "input": {"inline": "2024/01/15 Test\n    Expenses:Food  $50.00\n    (Budget:Food)  $-50.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["posting", "virtual"]
    },
    {
      "id": "posting-virtual-balanced",
      "description": "Balanced virtual posting with brackets",
      "input": {"inline": "2024/01/15 Test\n    Expenses:Food  $50.00\n    [Budget:Food]  $-50.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["posting", "virtual"]
    },
    {
      "id": "posting-lot-price",
      "description": "Posting with lot price",
      "input": {"inline": "2024/01/15 Buy Stock\n    Assets:Brokerage  10 AAPL @ $150.00\n    Assets:Checking  $-1500.00"},
      "expected": {"parse": "success"},
      "tags": ["posting", "lot"]
    },
    {
      "id": "posting-lot-total-price",
      "description": "Posting with total lot price",
      "input": {"inline": "2024/01/15 Buy Stock\n    Assets:Brokerage  10 AAPL @@ $1500.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["posting", "lot"]
    },
    {
      "id": "posting-lot-cost",
      "description": "Posting with lot cost (curly braces)",
      "input": {"inline": "2024/01/15 Sell Stock\n    Assets:Checking  $1600.00\n    Assets:Brokerage  -10 AAPL {$150.00}\n    Income:Gains  $-100.00"},
      "expected": {"parse": "success"},
      "tags": ["posting", "lot", "cost"]
    },
    {
      "id": "posting-lot-date",
      "description": "Posting with lot date",
      "input": {"inline": "2024/01/15 Sell Stock\n    Assets:Checking  $1600.00\n    Assets:Brokerage  -10 AAPL {$150.00} [2023/06/15]\n    Income:Gains"},
      "expected": {"parse": "success"},
      "tags": ["posting", "lot", "date"]
    },
    {
      "id": "account-directive",
      "description": "Account directive",
      "input": {"inline": "account Assets:Checking\n    note My primary checking account\n    alias checking"},
      "expected": {"parse": "success"},
      "tags": ["directive", "account"]
    },
    {
      "id": "commodity-directive",
      "description": "Commodity directive",
      "input": {"inline": "commodity $\n    format $1,000.00\n    note US Dollars"},
      "expected": {"parse": "success"},
      "tags": ["directive", "commodity"]
    },
    {
      "id": "alias-directive",
      "description": "Alias directive",
      "input": {"inline": "alias grocery=Expenses:Food:Grocery"},
      "expected": {"parse": "success"},
      "tags": ["directive", "alias"]
    },
    {
      "id": "include-directive",
      "description": "Include directive",
      "input": {"inline": "include other.ledger"},
      "expected": {"parse": "success"},
      "tags": ["directive", "include"]
    },
    {
      "id": "tag-directive",
      "description": "Tag directive",
      "input": {"inline": "tag project\n    check value =~ /^[A-Z]{3}-[0-9]+$/"},
      "expected": {"parse": "success"},
      "tags": ["directive", "tag"]
    },
    {
      "id": "payee-directive",
      "description": "Payee directive",
      "input": {"inline": "payee Grocery Store\n    alias Groceries\n    uuid 12345"},
      "expected": {"parse": "success"},
      "tags": ["directive", "payee"]
    },
    {
      "id": "define-directive",
      "description": "Define directive for value expression",
      "input": {"inline": "define my_account=Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["directive", "define"]
    },
    {
      "id": "year-directive",
      "description": "Year directive for default year",
      "input": {"inline": "year 2024\n\n01/15 Test\n    Assets:A  $100\n    Assets:B"},
      "expected": {"parse": "success"},
      "tags": ["directive", "year"]
    },
    {
      "id": "bucket-directive",
      "description": "Bucket/default directive",
      "input": {"inline": "bucket Assets:Checking\n\n2024/01/15 Test\n    Expenses:Food  $50.00"},
      "expected": {"parse": "success"},
      "tags": ["directive", "bucket"]
    },
    {
      "id": "assert-directive",
      "description": "Assert directive for balance check",
      "input": {"inline": "2024/01/15 Opening\n    Assets:Checking  $1000\n    Equity:Opening\n\nassert account(\"Assets:Checking\") == $1000"},
      "expected": {"parse": "success"},
      "tags": ["directive", "assert"]
    },
    {
      "id": "check-directive",
      "description": "Check directive (warning only)",
      "input": {"inline": "check account(\"Assets:Checking\") >= $0"},
      "expected": {"parse": "success"},
      "tags": ["directive", "check"]
    },
    {
      "id": "balance-assertion",
      "description": "Balance assertion inline",
      "input": {"inline": "2024/01/15 Deposit\n    Assets:Checking  $100.00 = $1100.00\n    Income:Salary"},
      "expected": {"parse": "success"},
      "tags": ["balance", "assertion"]
    },
    {
      "id": "periodic-transaction",
      "description": "Periodic transaction template",
      "input": {"inline": "~ Monthly\n    Expenses:Rent  $1500\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["periodic"]
    },
    {
      "id": "automated-transaction",
      "description": "Automated transaction",
      "input": {"inline": "= /Grocery/\n    (Budget:Food)  -1"},
      "expected": {"parse": "success"},
      "tags": ["automated"]
    },
    {
      "id": "metadata-tag",
      "description": "Transaction with metadata tag",
      "input": {"inline": "2024/01/15 Test\n    ; :project:personal:\n    Expenses:Food  $50.00\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["metadata", "tag"]
    },
    {
      "id": "metadata-key-value",
      "description": "Posting with metadata key-value",
      "input": {"inline": "2024/01/15 Test\n    Expenses:Food  $50.00\n        ; Category: Groceries\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["metadata"]
    },
    {
      "id": "effective-date",
      "description": "Transaction with effective date",
      "input": {"inline": "2024/01/15=2024/01/20 Future payment\n    Expenses:Bills  $100\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["date", "effective"]
    },
    {
      "id": "multi-currency",
      "description": "Multi-currency transaction",
      "input": {"inline": "2024/01/15 Currency Exchange\n    Assets:EUR  100.00 EUR @ $1.10\n    Assets:USD  $-110.00"},
      "expected": {"parse": "success"},
      "tags": ["currency", "exchange"]
    },
    {
      "id": "expression-amount",
      "description": "Amount as expression",
      "input": {"inline": "2024/01/15 Test\n    Expenses:Food  ($10.00 * 5)\n    Assets:Checking"},
      "expected": {"parse": "success"},
      "tags": ["expression", "amount"]
    },
    {
      "id": "unicode-payee",
      "description": "Unicode characters in payee",
      "input": {"inline": "2024/01/15 Café François\n    Expenses:Food  €15.00\n    Assets:Cash"},
      "expected": {"parse": "success"},
      "tags": ["unicode"]
    },
    {
      "id": "unicode-account",
      "description": "Unicode characters in account name",
      "input": {"inline": "2024/01/15 Test\n    Dépenses:Épicerie  €50.00\n    Actifs:Banque"},
      "expected": {"parse": "success"},
      "tags": ["unicode", "account"]
    },
    {
      "id": "apply-account",
      "description": "Apply account directive",
      "input": {"inline": "apply account Assets:Personal\n\n2024/01/15 Test\n    Checking  $100\n    Savings  $-100\n\nend apply account"},
      "expected": {"parse": "success"},
      "tags": ["directive", "apply"]
    },
    {
      "id": "apply-tag",
      "description": "Apply tag directive",
      "input": {"inline": "apply tag project:home\n\n2024/01/15 Test\n    Expenses:Home  $100\n    Assets:Checking\n\nend apply tag"},
      "expected": {"parse": "success"},
      "tags": ["directive", "apply", "tag"]
    }
  ]
}
